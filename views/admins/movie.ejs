<% layout('layouts/boilerplate')%>
   
<h1>Movie List</h1>
<div class="mb-3">
   <a class="btn btn-primary" href="/movies">All Movies</a>
</div>

<% if(!movies.length) { %>
    <h1>Movie List is empty!</h1>
<% } else { %>
    <div class="table-responsive mt-3 mb-3">
        <table class="table table-dark table-hover" style="border: 1px ridge white; font-family:Arial, Helvetica, sans-serif;">
            <thead style="text-align: center;">
                <tr>
                  <th scope="col">Image</th>
                  <th scope="col">Title</th>
                  <th scope="col">Director</th>
                  <th scope="col">Imdb_Rating &#9733</th>
                  <th scope="col">Budget (Crore)</th>
                  <th scope="col">Collection (Crore)</th>
                  <th scope="col">Author</th>
                  <th scope="col">Edit</th>
                  <th scope="col">Delete</th>
                </tr>
            </thead>
            <tbody style="text-align: center;">
            <% for(let movie of movies) { %>
                <tr>
                  <td><img style="width: 60px; border: 2px solid rgb(214, 214, 214); border-radius: 2px;" src="<%= movie.images[0].url %>" alt=""></td>
                  <td><%= movie.title %></td>
                  <td><%= movie.director %></td>
                  <td><%= movie.imdb_rating %></td>
                  <td><%= movie.budget %></td>
                  <td><%= movie.box_office_collection %></td>
                  <td><%= movie.author.username %></td>
                  <td><a class="btn btn-info btn-sm" href="/movies/<%= movie._id%>/edit">Edit</a></td>
                  <td>
                    <form action="/admin/movie/<%= movie._id %>?_method=DELETE" method="POST">
                      <button class="btn btn-danger btn-sm">Delete</button>
                    </form>
                  </td>
                </tr>
            <% } %>
            </tbody>
        </table>
    </div>
<% } %>