<% layout('layouts/boilerplate')%>
   
<h1>Review List</h1>
<div class="mb-3">
   <a class="btn btn-primary" href="/movies">All Movies</a>
</div>

<% if(!reviews.length) { %>
    <h1>Review List is empty!</h1>
<% } else { %>
<div class="table-responsive mt-3 mb-3">
    <table class="table table-dark table-hover" style="border: 1px ridge white; font-family:Arial, Helvetica, sans-serif;">
        <thead style="text-align: center;">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Movie</th>
              <th scope="col">Review</th>
              <th scope="col">Rating &#9733</th>
              <th scope="col">Author</th>
              <th scope="col">Delete</th>
            </tr>
        </thead>
        <tbody style="text-align: center;">
            <% let i=1 %>
            <% for(let movie of movies) { %>
                <% for(let review of movie.reviews) { %>
                    <tr>
                        <td><%= i++ %></td>
                        <td><%= movie.title %></td>
                        <td><%= review.body %></td>
                        <td><%= review.rating %></td>
                        <td><%= review.author.username %></td>
                        <td>
                          <form action="/admin/review/<%= review._id %>?_method=DELETE" method="POST">
                              <button class="btn btn-danger btn-sm">Delete</button>
                          </form>
                        </td>
                    </tr>
                <% } %>
            <% } %>
        </tbody>
    </table>
</div>
<% } %>
